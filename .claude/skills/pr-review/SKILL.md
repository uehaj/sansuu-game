---
name: pr-review
description: 現在のブランチの変更をPRレビュー形式で包括的にレビューし、コード品質、バグ、パフォーマンス、セキュリティの観点から評価する
---

# PR Review Skill

このスキルは、現在のブランチの変更を包括的にレビューし、プルリクエストレビューの形式で詳細なフィードバックを提供します。

## 実行手順

1. **ブランチ情報の確認**
   - 現在のブランチ名を取得
   - ベースブランチ（通常はmaster/main）を特定

2. **変更内容の取得**
   - `git diff master...HEAD` でmasterブランチとの差分を取得
   - 変更されたファイルのリストを表示
   - 各ファイルの変更内容を確認

3. **コードレビューの実施**
   以下の観点で詳細にレビュー：

   ### コードの品質と可読性
   - コードが理解しやすく、保守しやすいか
   - 変数名、関数名が適切か
   - コメントが必要な箇所に適切に記載されているか
   - コードの重複がないか

   ### 潜在的なバグやエラーハンドリング
   - エッジケースが考慮されているか
   - null/undefined チェックが適切か
   - try-catch などの例外処理が適切か
   - 非同期処理のエラーハンドリング

   ### パフォーマンスの懸念
   - 不要な再レンダリングはないか（React）
   - 不要なループや計算はないか
   - メモリリークの可能性はないか
   - 最適化の余地はないか

   ### セキュリティの問題
   - XSS（クロスサイトスクリプティング）の脆弱性
   - インジェクション攻撃の可能性
   - 機密情報のハードコーディング
   - 不適切な認証・認可処理

   ### ベストプラクティスへの準拠
   - React/JavaScript/TypeScriptのベストプラクティス
   - プロジェクトの既存コーディング規約
   - 適切なデザインパターンの使用

4. **レビュー結果の出力**

## 出力形式

レビュー結果は以下の構造化された形式で出力してください：

```markdown
## 📋 変更サマリー
- 変更されたファイル数: X個
- 追加行数: +XXX
- 削除行数: -XXX
- 主な変更内容の概要

## 📁 変更ファイル一覧
- `path/to/file1.js` - 変更の概要
- `path/to/file2.tsx` - 変更の概要

## ✅ 良い点
具体的なファイル名と行数を示して、評価できる実装をリストアップ：
- 良い実装例1（ファイル名:行数）
- 良い実装例2

## ⚠️ 改善提案
優先度順に問題点と具体的な改善案を提示：

### 🔴 Critical（重要）
- **問題点**: 具体的な問題の説明（ファイル名:行数）
  ```javascript
  // 現在のコード
  ```
  **改善案**:
  ```javascript
  // 推奨されるコード
  ```

### 🟡 Minor（軽微）
- 軽微な改善提案

## 🔒 セキュリティチェック
- ✅ XSS対策: 問題なし
- ✅ インジェクション対策: 問題なし
- ⚠️ その他の懸念事項があれば記載

## 🚀 パフォーマンスチェック
- パフォーマンス上の懸念や最適化の提案

## 📊 総合評価
- **判定**: LGTM ✅ / 要修正 ⚠️ / 要議論 🤔
- **コメント**: 総合的な評価コメント
```

## 使用例

ユーザーがこのスキルを呼び出すと、自動的に：
1. 現在のブランチの変更を分析
2. 上記の観点で包括的にレビュー
3. 構造化された形式でフィードバックを提供

## 注意事項

- GitHubにプッシュ済みのPRがある場合は、PR番号を指定することも可能
- ローカルの未コミットの変更も含めてレビュー可能
- レビュー結果は日本語で出力
