(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{237:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=a(15),i=a(95),s=a.n(i),u=a(46),m=a(21),g=a(18),d=a.n(g),f=a(22),h=a.n(f),E=a(9),b=a.n(E),S=a(25),p=a.n(S),O=a(85),v=a.n(O),j=Object(o.createStyles)({});var w=Object(o.withStyles)(j)(function(e){var t=e.message,a=e.onOk,n=e.answerShowing;return r.a.createElement(v.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,message:r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"h4",style:{color:"white"}},t),r.a.createElement(d.a,null,r.a.createElement(h.a,{onClick:function(){a&&a()},variant:"contained"},r.a.createElement(d.a,{variant:"h4"},"OK"))))})}),R=Object(o.createStyles)({buttonWrapper:{textAlign:"center"},button:{margin:"0.5rem",fontSize:"1.2rem"}});function y(e,t){return null===t?"":e.answer===t?"\u6b63\u89e3\u3067\u3059":"".concat(t,"\u306f\u4e0d\u6b63\u89e3\u3067\u3059\u3002\u6b63\u89e3\u306f").concat(e.answer)}var k=function(e,t){return Object(n.useCallback)(function(a){t(function(t){return 10*t+e})},[e,t])},N=function(e){return Object(n.useCallback)(function(t){e(0)},[])},x=function(e,t,a){return Object(n.useCallback)(function(n){e(function(e){return t(e),a(e),e})},[])};var C=Object(o.withStyles)(R)(function(e){var t=e.classes,a=e.gameState,c=e.onAnswered,l=e.setPhase,o=Object(n.useState)(0),i=Object(m.a)(o,2),s=i[0],u=i[1],g=Object(n.useState)(null),f=Object(m.a)(g,2),E=f[0],S=f[1],O=Object(n.useRef)();Object(n.useEffect)(function(){O&&O.current&&O.current.focus()});var v=Object(n.useRef)(a);v.current=a;var j=a.gameRounds[a.currentGameRound];return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{message:y(j,E),answerShowing:null!==E,onOk:function(){S(null),u(0);var e=v.current;e.currentGameRound===e.gameRounds.length-1&&l("finished")}}),r.a.createElement(b.a,{container:!0,spacing:32},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(d.a,{variant:"h4",align:"center"},r.a.createElement("b",null,"\u554f\u984c".concat(a.currentGameRound+1," ")),"/"," ",a.gameRounds.length))),r.a.createElement(b.a,{container:!0,spacing:32,style:{marginBottom:"0.5rem",padding:"0.1fem"}},r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(d.a,{variant:"h4"},"".concat(j.question))),r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(p.a,null,r.a.createElement(d.a,{variant:"h3",align:"right"},s)))),r.a.createElement(p.a,{style:{margin:"0.1em",padding:"0.1em"}},r.a.createElement(b.a,{container:!0,justify:"space-between"},[1,2,3,4,5,6,7,8,9,0].map(function(e){return r.a.createElement(b.a,{item:!0,xs:4,key:e,style:{textAlign:"center"}},r.a.createElement(h.a,{variant:"contained",className:t.button,onClick:k(e,u)},e))}),r.a.createElement(b.a,{item:!0,xs:4,className:t.buttonWrapper},r.a.createElement(h.a,{variant:"contained",className:t.button,onClick:N(u)},"CLR")),r.a.createElement(b.a,{item:!0,xs:4,className:t.buttonWrapper},r.a.createElement(h.a,{variant:"contained",className:t.button,onClick:x(u,S,c),buttonRef:O},"OK")))))}),P=a(86),T=a.n(P),I=a(88),G=a.n(I),L=a(23),A=a.n(L),B=a(87),F=a.n(B),M=a(54),J=a.n(M),D=Object(o.createStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700}}});var H=Object(o.withStyles)(D)(function(e){var t=e.classes,a=e.componentProps,n=e.gameLog;return r.a.createElement(p.a,Object.assign({className:t.root},a),r.a.createElement(T.a,{className:t.table},r.a.createElement(F.a,null,r.a.createElement(J.a,null,r.a.createElement(A.a,null,"\u65e5\u4ed8"),r.a.createElement(A.a,null,"\u540d\u524d"),r.a.createElement(A.a,null,"\u6b63\u89e3"),r.a.createElement(A.a,null,"\u5e73\u5747\u6642\u9593"))),r.a.createElement(G.a,null,n.map(function(e,t){return r.a.createElement(J.a,{key:t},r.a.createElement(A.a,{component:"th",scope:"row"},e[0]),r.a.createElement(A.a,{component:"th",scope:"row"},e[1]),r.a.createElement(A.a,{component:"th",scope:"row"},e[2]),r.a.createElement(A.a,{component:"th",scope:"row"},Math.round(10*e[3])/10))}))))}),W=a(93),q=a.n(W),z=a(55),K=a.n(z),X=a(91),Q=a.n(X),U=a(92),V=a.n(U),Y=a(89),Z=a.n(Y),$=a(90),_=a.n($),ee=Object(o.createStyles)({appBar:{marginBottom:"0.5rem"},menuButton:{marginLeft:-12,marginRight:20}});var te=Object(o.withStyles)(ee)(function(e){var t=e.classes,a=e.gameStateOperators,c=e.setGameLog,l=Object(n.useState)(null),o=Object(m.a)(l,2),i=o[0],s=o[1],u=(a.gameState,a.setPhase);return a.addCurrentRound,a.setPlayerName,a.setStartTimeInString,a.setFinishTimeInString,a.setLastRoundStarted,a.clear,a.addResult,r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{position:"static",className:t.appBar},r.a.createElement(_.a,null,r.a.createElement(Q.a,{className:t.menuButton,color:"inherit",onClick:function(e){s(e.currentTarget)}},r.a.createElement(V.a,null)),r.a.createElement(d.a,{variant:"h4",color:"inherit"},"\u3055\u3093\u3059\u3046\u30b2\u30fc\u30e0"))),r.a.createElement("div",null,r.a.createElement(q.a,{id:"simple-menu",anchorEl:i,open:Boolean(i),onClose:function(e){s(null)}},r.a.createElement(K.a,{onClick:function(e){s(null),u("finished")}},"\u4e2d\u6b62"),r.a.createElement(K.a,{onClick:function(e){s(null),localStorage.setItem("log",JSON.stringify([])),c([]),u("finished")}},"\u5c65\u6b74\u3092\u6d88\u53bb"))))}),ae=function(e){var t=e.gameStateOperators,a=e.children,n=e.setGameLog;return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{gameStateOperators:t,setGameLog:n}),a)},ne=a(24),re=a(94),ce=function e(t,a,n,r){Object(re.a)(this,e),this.leftHandSide=void 0,this.rightHandSide=void 0,this.operationName=void 0,this.operation=void 0,this.answer=void 0,this.question=void 0,this.leftHandSide=t,this.rightHandSide=a,this.operation=r,this.answer=this.operation(t,a),this.operationName=n,this.question="\u300c".concat(t," ").concat(this.operationName," ").concat(a,"\u300d\u306e\u7b54\u3048\u306f\uff1f")};function le(e){return Array(e).fill(0).map(function(e,t){return new ce(Math.floor(99*Math.random())+1,Math.floor(99*Math.random())+1,"\uff0b",function(e,t){return e+t})})}var oe=Object(o.createStyles)({button:{margin:"1rem",fontSize:"2rem",width:"20rem"}});var ie=Object(o.withStyles)(oe)(function(e){var t=e.classes,a=e.log,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=Object(n.useState)({gamePhase:"initial",currentGameRound:0,gameRounds:le(e),results:[]}),a=Object(m.a)(t,2),r=a[0],c=a[1];return{gameState:r,setPhase:function(e){c(function(t){return Object(ne.a)({},t,{gamePhase:e})})},addCurrentRound:function(){c(function(e){return Object(ne.a)({},e,{currentGameRound:e.currentGameRound+1})})},setPlayerName:function(e){c(function(t){return Object(ne.a)({},t,{playerName:e})})},setStartTimeInString:function(e){c(function(t){return Object(ne.a)({},t,{startTimeInString:e})})},setFinishTimeInString:function(e){c(function(t){return Object(ne.a)({},t,{finishTimeInString:e})})},setLastRoundStarted:function(e){c(function(t){return Object(ne.a)({},t,{lastRoundStarted:e})})},clear:function(){c(function(e){return Object(ne.a)({},e,{results:[],currentGameRound:0})})},addResult:function(e){c(function(t){return Object(ne.a)({},t,{results:[].concat(Object(u.a)(t.results),[e])})})}}}(),l=c.gameState,o=c.setPhase,i=c.addCurrentRound,s=c.setPlayerName,g=c.setStartTimeInString,f=c.setFinishTimeInString,E=c.setLastRoundStarted,S=c.clear,p=c.addResult,O=Object(n.useState)(a),v=Object(m.a)(O,2),j=v[0],w=v[1],R=Object(n.useRef)(l);R.current=l;var y=Object(n.useCallback)(function(){o("running");var e=new Date;E(e.getTime()),g(e.toLocaleString()),S(),s("unknown")},[]),k=Object(n.useCallback)(function(e){var t=R.current;if(t.lastRoundStarted){var a=t.gameRounds[t.currentGameRound];t.lastRoundStarted&&p({elapsedTimeInMilliSec:Date.now()-t.lastRoundStarted,correct:a.answer===e})}if(t.currentGameRound===t.gameRounds.length-1){f((new Date).toString());var n=function(e){var t=[e.startTimeInString,e.playerName,"".concat(e.results.reduce(function(e,t){return e+(t.correct?1:0)},0)," / ").concat(e.results.length),e.results.reduce(function(e,t){return e+t.elapsedTimeInMilliSec},0)/1e3/e.gameRounds.length];return console.log("gameResult=",t),t}(t);w(function(e){var t=[].concat(Object(u.a)(e),[n]);return console.log(t),localStorage.setItem("log",JSON.stringify(t)),t}),o("finished")}else i()},[]);return r.a.createElement(ae,{gameStateOperators:c,setGameLog:w},r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:1}),"initial"===l.gamePhase?(o("splash"),r.a.createElement("div",null)):"splash"===l.gamePhase?(setTimeout(function(){o("ready")},1e3),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(d.a,{align:"center",variant:"h1"},"\u7b97\u6570\u30b2\u30fc\u30e0")),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(d.a,{align:"center",variant:"h4"},"\u3055\u3093\u3059\u3046\u30b2\u30fc\u30e0\u304c\u306f\u3058\u307e\u308a\u307e\u3059\u3002")))):"ready"===l.gamePhase?r.a.createElement(b.a,{container:!0,style:{flexDirection:"column"}},r.a.createElement(b.a,{item:!0,sm:1}),r.a.createElement(b.a,{item:!0,sm:10,style:{textAlign:"center"}},r.a.createElement(h.a,{variant:"contained",className:t.button,color:"secondary",onClick:y,"data-testid":"start"},"START")),r.a.createElement(b.a,{item:!0,xs:1})):"running"===l.gamePhase?(console.log("gameState==",l),r.a.createElement(b.a,{item:!0,xs:10},r.a.createElement(C,{gameState:l,setPhase:o,onAnswered:k}))):"finished"===l.gamePhase?r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(H,{componentProps:{width:"100%"},gameLog:j})),r.a.createElement(b.a,{item:!0,xs:12,style:{textAlign:"center"}},r.a.createElement(h.a,{variant:"contained",className:t.button,color:"secondary",onClick:function(){o("initial")},"data-testid":"finished-ok"},"OK"))):r.a.createElement("div",null,"Error: ",l.gamePhase)))}),se=Object(o.createStyles)({});var ue=Object(o.withStyles)(se)(function(e){e.classes;var t=e.log;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null),r.a.createElement(ie,{log:t}))}),me=localStorage.getItem("log");console.log(me);var ge=[];ge=null===me?[]:JSON.parse(me),console.log("load=",ge),l.a.render(r.a.createElement(ue,{log:ge}),document.getElementById("root"))},96:function(e,t,a){e.exports=a(237)}},[[96,1,2]]]);
//# sourceMappingURL=main.862c604f.chunk.js.map