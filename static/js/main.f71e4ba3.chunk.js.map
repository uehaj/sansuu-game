{"version":3,"sources":["components/Header.tsx","components/Layout.tsx","components/App.tsx","index.tsx","components/MainPanel.tsx","components/Results.tsx","hooks/useGameState.tsx","components/AnsweredPanel.tsx","components/NumPad.tsx"],"names":["styles","createStyles","appBar","marginBottom","menuButton","marginLeft","marginRight","withStyles","_ref","classes","gameStateOperators","setGameLog","_useState","useState","_useState2","Object","slicedToArray","anchorEl","setAnchorEl","setPhase","gameState","addCurrentRound","setPlayerName","setStartTimeInString","setFinishTimeInString","setLastRoundStarted","clear","addResult","react_default","a","createElement","Fragment","AppBar_default","position","className","Toolbar_default","IconButton_default","color","onClick","event","currentTarget","icons_Menu_default","Typography_default","variant","Menu_default","id","open","Boolean","onClose","MenuItem_default","localStorage","setItem","JSON","stringify","__webpack_exports__","children","components_Header","log","CssBaseline_default","MainPanel","stringLog","getItem","console","parse","ReactDOM","render","components_App","document","getElementById","button","margin","fontSize","width","useGameState","_Users_uehaj_work_201903_sansuu_game_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","gameLog","gameStateRef","useRef","current","gameStart","useCallback","now","Date","getTime","toLocaleString","handleAnswered","answer","lastRoundStarted","game","questions","currentQuestion","elapsedTimeInMilliSec","correct","length","setImmediate","toString","prevValue","record","gameResult","startTimeInString","playerName","concat","results","reduce","acc","curr","recordOf","nextValue","_Users_uehaj_work_201903_sansuu_game_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2___default","_Layout__WEBPACK_IMPORTED_MODULE_9__","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_6___default","container","item","xs","gamePhase","setTimeout","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_4___default","align","style","flexDirection","sm","textAlign","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_5___default","data-testid","_NumPad__WEBPACK_IMPORTED_MODULE_7__","onAnswered","_Results__WEBPACK_IMPORTED_MODULE_8__","componentProps","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_Table__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_Table__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_4___default","_material_ui_core_TableHead__WEBPACK_IMPORTED_MODULE_5__","_material_ui_core_TableHead__WEBPACK_IMPORTED_MODULE_5___default","_material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_6__","_material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_7__","_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_7___default","theme","root","marginTop","spacing","unit","overflowX","table","minWidth","props","assign","map","result","i","key","component","scope","Math","round","Question","lhs","rhs","opeName","operation","_Users_uehaj_work_201903_sansuu_game_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","leftHandSide","rightHandSide","operationName","question","generateGames","nRounds","Array","fill","_","floor","random","arguments","undefined","_Users_uehaj_work_201903_sansuu_game_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setGameState","newPhase","prevState","_Users_uehaj_work_201903_sansuu_game_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","finishTimeInString","message","onOk","answerShowing","Snackbar_default","anchorOrigin","vertical","horizontal","Button_default","buttonWrapper","genMessage","handleNumberPressed","keyTop","setNumber","prevN","handleCLR","handleOK","setAnswer","number","_useState3","_useState4","ref","useEffect","focus","components_AnsweredPanel","Grid_default","padding","Paper_default","justify","buttonRef"],"mappings":"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","file":"static/js/main.f71e4ba3.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\n\nimport { useGameState } from '../hooks/useGameState';\n\nconst styles = createStyles({\n  appBar: {\n    marginBottom: '0.5rem',\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n});\n\ntype Props = {\n  classes: any;\n  gameStateOperators: ReturnType<typeof useGameState>;\n  setGameLog: (arg: [][]) => void;\n};\n\nfunction Header({ classes, gameStateOperators, setGameLog }: Props) {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const {\n    gameState,\n    setPhase,\n    addCurrentRound,\n    setPlayerName,\n    setStartTimeInString,\n    setFinishTimeInString,\n    setLastRoundStarted,\n    clear,\n    addResult,\n  } = gameStateOperators;\n\n  const handleClick = (event: any) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleSelectBreak = (event: any) => {\n    setAnchorEl(null);\n    setPhase('finished');\n  };\n\n  const handleSelectRecordClear = (event: any) => {\n    setAnchorEl(null);\n    localStorage.setItem('log', JSON.stringify([]));\n    setGameLog([]);\n    setPhase('finished');\n  };\n\n  const handleClose = (event: any) => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <>\n      <AppBar position=\"static\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            onClick={handleClick}>\n            <MenuIcon />\n          </IconButton>\n          <Typography variant={'h4'} color=\"inherit\">\n            さんすうゲーム\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <div>\n        <Menu\n          id=\"simple-menu\"\n          anchorEl={anchorEl}\n          open={Boolean(anchorEl)}\n          onClose={handleClose}>\n          <MenuItem onClick={handleSelectBreak}>中止</MenuItem>\n          <MenuItem onClick={handleSelectRecordClear}>履歴を消去</MenuItem>\n        </Menu>\n      </div>\n    </>\n  );\n}\n\nexport default withStyles(styles)(Header);\n","import React, { useState, useCallback } from 'react';\n\nimport Header from './Header';\nimport { useGameState } from '../hooks/useGameState';\n\ntype Props = {\n  gameStateOperators: ReturnType<typeof useGameState>;\n  setGameLog: (arg: [][]) => void;\n  children: React.ReactNode;\n};\n\nexport default ({ gameStateOperators, children, setGameLog }: Props) => (\n  <>\n    <Header gameStateOperators={gameStateOperators} setGameLog={setGameLog} />\n    {children}\n  </>\n);\n","import React, { useState, useCallback } from 'react';\n\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\n\nimport MainPanel from './MainPanel';\n\nconst styles = createStyles({});\n\ntype Props = {\n  classes: any;\n  log: any;\n};\n\nfunction App({ classes, log }: Props) {\n  return (\n    <>\n      <CssBaseline />\n      <MainPanel log={log} />\n    </>\n  );\n}\n\nexport default withStyles(styles)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nconst stringLog: string | null = localStorage.getItem('log');\nconsole.log(stringLog);\nlet log: any = [];\nif (stringLog === null) {\n  log = [];\n} else {\n  log = JSON.parse(stringLog);\n}\nconsole.log('load=', log);\nReactDOM.render(<App log={log} />, document.getElementById('root'));\n","import React, { useState, useCallback, useRef } from 'react';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\n\nimport NumPad from './NumPad';\nimport Results from './Results';\nimport Layout from './Layout';\n\nimport {\n  useGameState,\n  Question,\n  GameState,\n  Record,\n} from '../hooks/useGameState';\n\nconst styles = createStyles({\n  button: {\n    margin: '1rem',\n    fontSize: '2rem',\n    width: '20rem',\n  },\n});\n\nfunction recordOf(gameState: GameState) {\n  console.log(gameState);\n  const gameResult = [\n    gameState.startTimeInString,\n    gameState.playerName,\n    `${gameState.results.reduce(\n      (acc, curr) => acc + (curr.correct ? 1 : 0),\n      0\n    )} / ${gameState.results.length}`,\n    gameState.results.reduce(\n      (acc, curr) => acc + curr.elapsedTimeInMilliSec,\n      0\n    ) /\n      1000 /\n      gameState.questions.length,\n  ];\n  console.log('gameResult=', gameResult);\n  return gameResult;\n}\n\ntype Props = {\n  classes: any;\n  log: any;\n};\n\nfunction MainPanel({ classes, log }: Props) {\n  const gameStateOperators = useGameState();\n\n  const {\n    gameState,\n    setPhase,\n    addCurrentRound,\n    setPlayerName,\n    setStartTimeInString,\n    setFinishTimeInString,\n    setLastRoundStarted,\n    clear,\n    addResult,\n  } = gameStateOperators;\n\n  const [gameLog, setGameLog] = useState<[][]>(log);\n\n  // gameStateをイベントハンドラとの間でシェアする。\n  const gameStateRef = useRef<GameState>(gameState);\n  gameStateRef.current = gameState;\n\n  // スタートボタンが押されたときに呼びだされるイベントハンドラ。\n  const gameStart = useCallback(() => {\n    setPhase('running');\n    const now = new Date();\n    setLastRoundStarted(now.getTime());\n    setStartTimeInString(now.toLocaleString());\n    clear();\n    setPlayerName('unknown');\n  }, []);\n\n  // ひとつの質問の回答がなされたときに呼びだされるイベントハンドラ。\n  const handleAnswered = useCallback((answer: number) => {\n    let gameState = gameStateRef.current;\n\n    // この質問の開始時刻と現在時刻の差を記録\n    if (gameState.lastRoundStarted) {\n      const game = gameState.questions[gameState.currentQuestion];\n      console.log('[1]', gameState);\n      if (gameState.lastRoundStarted) {\n        addResult({\n          elapsedTimeInMilliSec: Date.now() - gameState.lastRoundStarted,\n          correct: game.answer === answer,\n        });\n      }\n      console.log('[2]', gameState);\n    }\n\n    if (gameState.currentQuestion === gameState.questions.length - 1) {\n      // 一連の問題(Round)が終了\n      setImmediate(() => {\n        // addResultで更新されたgameStateを使うため次のイベントループで処理する\n        setFinishTimeInString(new Date().toString());\n        gameState = gameStateRef.current;\n        setGameLog((prevValue: any) => {\n          const record = recordOf(gameState);\n          const nextValue = [...prevValue, record];\n          console.log(nextValue);\n          localStorage.setItem('log', JSON.stringify(nextValue));\n          return nextValue;\n        });\n        setPhase('finished');\n      });\n    } else {\n      addCurrentRound();\n    }\n  }, []);\n\n  // 結果表示画面でOKボタンが押されたときに呼びだされるイベントハンドラ。\n  const gameReviewed = (gameState: GameState) => () => {\n    setPhase('initial');\n  };\n\n  return (\n    <Layout gameStateOperators={gameStateOperators} setGameLog={setGameLog}>\n      <Grid container>\n        <Grid item xs={1} />\n        {(() => {\n          if (gameState.gamePhase === 'initial') {\n            setPhase('splash');\n            return <div />;\n          } else if (gameState.gamePhase === 'splash') {\n            setTimeout(() => {\n              setPhase('ready');\n            }, 1000);\n            return (\n              <Grid container>\n                <Grid item xs={12}>\n                  <Typography align={'center'} variant={'h1'}>\n                    算数ゲーム\n                  </Typography>\n                </Grid>\n                <Grid item xs={12}>\n                  <Typography align={'center'} variant={'h4'}>\n                    さんすうゲームがはじまります。\n                  </Typography>\n                </Grid>\n              </Grid>\n            );\n          } else if (gameState.gamePhase === 'ready') {\n            return (\n              <Grid\n                container\n                style={{\n                  flexDirection: 'column',\n                }}>\n                <Grid item sm={1} />\n                <Grid\n                  item\n                  sm={10}\n                  style={{\n                    textAlign: 'center',\n                  }}>\n                  <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color={'secondary'}\n                    onClick={gameStart}\n                    data-testid=\"start\">\n                    START\n                  </Button>\n                </Grid>\n                <Grid item xs={1} />\n              </Grid>\n            );\n          } else if (gameState.gamePhase === 'running') {\n            console.log('gameState==', gameState);\n            return (\n              <Grid item xs={10}>\n                <NumPad\n                  gameState={gameState}\n                  setPhase={setPhase}\n                  onAnswered={handleAnswered}\n                />\n              </Grid>\n            );\n          } else if (gameState.gamePhase === 'finished') {\n            return (\n              <Grid container>\n                <Grid item xs={12}>\n                  <Results\n                    componentProps={{\n                      width: '100%',\n                    }}\n                    gameLog={gameLog}\n                  />\n                </Grid>\n                <Grid\n                  item\n                  xs={12}\n                  style={{\n                    textAlign: 'center',\n                  }}>\n                  <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color={'secondary'}\n                    onClick={gameReviewed(gameState)}\n                    data-testid=\"finished-ok\">\n                    OK\n                  </Button>\n                </Grid>\n              </Grid>\n            );\n          } else {\n            return <div>Error: {gameState.gamePhase}</div>;\n          }\n        })()}\n      </Grid>\n    </Layout>\n  );\n}\n\nexport default withStyles(styles)(MainPanel);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\nimport { GameState } from '../hooks/useGameState';\n\nconst styles = createStyles((theme: any) => ({\n  root: {\n    width: '100%',\n    marginTop: theme.spacing.unit * 3,\n    overflowX: 'auto',\n  },\n  table: {\n    minWidth: 700,\n  },\n}));\n\ntype Props = { classes: any; componentProps: any; gameLog: any };\n\nfunction Results(props: Props) {\n  const { classes, componentProps, gameLog } = props;\n\n  return (\n    <Paper className={classes.root} {...componentProps}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell>日付</TableCell>\n            <TableCell>名前</TableCell>\n            <TableCell>正解率</TableCell>\n            <TableCell>平均時間</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {gameLog.map((result: any, i: number) => (\n            <TableRow key={i}>\n              <TableCell component=\"th\" scope=\"row\">\n                {result[0]}\n              </TableCell>\n              <TableCell component=\"th\" scope=\"row\">\n                {result[1]}\n              </TableCell>\n              <TableCell component=\"th\" scope=\"row\">\n                {result[2]}\n              </TableCell>\n              <TableCell component=\"th\" scope=\"row\">\n                {Math.round(result[3] * 10) / 10}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </Paper>\n  );\n}\n\nexport default withStyles(styles)(Results);\n","import React, { useState } from 'react';\n\nexport type GamePhase = 'initial' | 'splash' | 'ready' | 'running' | 'finished';\n\nexport class Question {\n  private leftHandSide: number;\n  private rightHandSide: number;\n  private operationName: string;\n  private operation: (lhs: number, rhs: number) => number;\n\n  public answer: number;\n  public question: string;\n\n  constructor(\n    lhs: number,\n    rhs: number,\n    opeName: string,\n    operation: (lhs: number, rhs: number) => number\n  ) {\n    this.leftHandSide = lhs;\n    this.rightHandSide = rhs;\n    this.operation = operation;\n    this.answer = this.operation(lhs, rhs);\n    this.operationName = opeName;\n    this.question = `「${lhs} ${this.operationName} ${rhs}」の答えは？`;\n  }\n}\n\nexport type Record = {\n  elapsedTimeInMilliSec: number;\n  correct: boolean;\n};\n\nexport type GameState = {\n  gamePhase: GamePhase;\n  currentQuestion: number;\n  questions: Question[];\n  results: Record[];\n  playerName?: string;\n  startTimeInString?: string;\n  finishTimeInString?: string;\n  lastRoundStarted?: number;\n};\n\nfunction generateGames(nRounds: number): Question[] {\n  return Array(nRounds)\n    .fill(0)\n    .map(\n      (_, i) =>\n        new Question(\n          Math.floor(Math.random() * 99) + 1,\n          Math.floor(Math.random() * 99) + 1,\n          '＋',\n          (lhs: number, rhs: number) => lhs + rhs\n        )\n    );\n}\n\nexport function useGameState(nRounds = 5) {\n  const [gameState, setGameState] = useState<GameState>({\n    gamePhase: 'initial',\n    currentQuestion: 0,\n    questions: generateGames(nRounds),\n    results: [] as Record[],\n  });\n  return {\n    gameState,\n    setPhase: (newPhase: GamePhase) => {\n      setGameState((prevState: GameState) => ({\n        ...prevState,\n        gamePhase: newPhase,\n      }));\n    },\n    addCurrentRound: () => {\n      setGameState(prevState => ({\n        ...prevState,\n        currentQuestion: prevState.currentQuestion + 1,\n      }));\n    },\n    setPlayerName: (playerName: string) => {\n      setGameState(prevState => ({\n        ...prevState,\n        playerName,\n      }));\n    },\n    setStartTimeInString: (startTimeInString: string) => {\n      setGameState(prevState => ({\n        ...prevState,\n        startTimeInString,\n      }));\n    },\n    setFinishTimeInString: (finishTimeInString: string) => {\n      setGameState(prevState => ({\n        ...prevState,\n        finishTimeInString,\n      }));\n    },\n    setLastRoundStarted: (lastRoundStarted: number) => {\n      setGameState(prevState => ({\n        ...prevState,\n        lastRoundStarted,\n      }));\n    },\n    clear: () => {\n      setGameState(prevState => ({\n        ...prevState,\n        results: [],\n        currentQuestion: 0,\n      }));\n    },\n    addResult: (result: Record) => {\n      setGameState(prevState => ({\n        ...prevState,\n        results: [...prevState.results, result],\n      }));\n    },\n  };\n}\n","import React, { useState, useCallback } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nconst styles = createStyles({});\n\ntype Props = {\n  classes: any;\n  onOk: () => void;\n  message?: string;\n  answerShowing: boolean;\n};\n\nfunction AnsweredPanel({ message, onOk, answerShowing }: Props) {\n  return (\n    <Snackbar\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n      open={answerShowing}\n      message={\n        <>\n          <Typography variant={'h4'} style={{ color: 'white' }}>\n            {message}\n          </Typography>\n          <Typography>\n            <Button\n              onClick={() => {\n                if (onOk) {\n                  onOk();\n                }\n              }}\n              variant={'contained'}>\n              <Typography variant={'h4'}>OK</Typography>\n            </Button>\n          </Typography>\n        </>\n      }\n    />\n  );\n}\n\nexport default withStyles(styles)(AnsweredPanel);\n","import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\n\nimport AnsweredPanel from '../components/AnsweredPanel';\nimport { Question, GameState, GamePhase } from '../hooks/useGameState';\n\nconst styles = createStyles({\n  buttonWrapper: {\n    textAlign: 'center',\n  },\n  button: {\n    margin: '0.5rem',\n    fontSize: '1.2rem',\n  },\n});\n\nfunction genMessage(game: Question, answer: number | null) {\n  if (answer === null) {\n    return '';\n  } else if (game.answer === answer) {\n    return `正解です`;\n  } else {\n    return `${answer}は不正解です。正解は${game.answer}`;\n  }\n}\n\ntype Props = {\n  classes: any;\n  setPhase: (newPhase: GamePhase) => void;\n  onAnswered: (answer: number) => void;\n  gameState: GameState;\n};\n\nconst handleNumberPressed = (\n  keyTop: number,\n  setNumber: (z: number | ((y: number) => number)) => void\n) =>\n  useCallback(\n    (event: any) => {\n      setNumber((prevN: number) => prevN * 10 + keyTop);\n    },\n    [keyTop, setNumber]\n  );\n\nconst handleCLR = (setNumber: (z: number | ((y: number) => number)) => void) =>\n  useCallback((event: any) => {\n    setNumber(0);\n  }, []);\n\nconst handleOK = (\n  setNumber: (z: number | ((y: number) => number)) => void,\n  setAnswer: (z: number) => void\n) =>\n  useCallback((event: any) => {\n    setNumber(prevN => {\n      setAnswer(prevN);\n      return prevN;\n    });\n  }, []);\n\nfunction NumPad({ classes, gameState, onAnswered, setPhase }: Props) {\n  const [number, setNumber] = useState<number>(0);\n  const [answer, setAnswer] = useState<number | null>(null);\n\n  // refを使ってボタンにフォーカスを取得させる\n  const ref = useRef();\n  useEffect(() => {\n    if (ref && ref.current) {\n      (ref.current as any).focus();\n    }\n  });\n\n  // gameStateをイベントハンドラとの間でシェアする。\n  const gameStateRef = useRef<GameState>(gameState);\n  gameStateRef.current = gameState;\n\n  const game = gameState.questions[gameState.currentQuestion];\n  return (\n    <>\n      <AnsweredPanel\n        message={genMessage(game, answer)}\n        answerShowing={answer !== null}\n        onOk={() => {\n          setNumber(0);\n          const gameState = gameStateRef.current;\n          if (gameState.currentQuestion === gameState.questions.length - 1) {\n            setPhase('finished');\n          }\n          if (answer !== null) {\n            onAnswered(answer);\n            setAnswer(null);\n          }\n        }}\n      />\n      <Grid container spacing={32}>\n        <Grid item xs={12}>\n          <Typography variant={'h4'} align={'center'}>\n            <b>{`問題${gameState.currentQuestion + 1} `}</b>/{' '}\n            {gameState.questions.length}\n          </Typography>\n        </Grid>\n      </Grid>\n      <Grid\n        container\n        spacing={32}\n        style={{ marginBottom: '0.5rem', padding: '0.1fem' }}>\n        <Grid item xs={12} sm={6}>\n          <Typography variant={'h4'}>{`${game.question}`}</Typography>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Paper>\n            <Typography variant={'h3'} align={'right'}>\n              {number}\n            </Typography>\n          </Paper>\n        </Grid>\n      </Grid>\n      <Paper style={{ margin: '0.1em', padding: '0.1em' }}>\n        <Grid container justify=\"space-between\">\n          {[1, 2, 3, 4, 5, 6, 7, 8, 9, 0].map(n => (\n            <Grid item xs={4} key={n} style={{ textAlign: 'center' }}>\n              <Button\n                variant={'contained'}\n                className={classes.button}\n                onClick={handleNumberPressed(n, setNumber)}>\n                {n}\n              </Button>\n            </Grid>\n          ))}\n          <Grid item xs={4} className={classes.buttonWrapper}>\n            <Button\n              variant={'contained'}\n              className={classes.button}\n              onClick={handleCLR(setNumber)}>\n              CLR\n            </Button>\n          </Grid>\n          <Grid item xs={4} className={classes.buttonWrapper}>\n            <Button\n              variant={'contained'}\n              className={classes.button}\n              onClick={handleOK(setNumber, setAnswer)}\n              buttonRef={ref}>\n              OK\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </>\n  );\n}\n\nexport default withStyles(styles)(NumPad);\n"],"sourceRoot":""}