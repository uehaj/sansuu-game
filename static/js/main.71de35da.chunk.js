(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{237:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),o=a(95),l=a.n(o),s=a(18),m=a(46),u=a(24),g=a(17),d=a.n(g),h=a(27),f=a.n(h),E=a(14),S=a.n(E),p=a(23),b=a.n(p),v=a(83),w=a.n(v),R=function(e,t,a,r){return Object(n.useCallback)(function(n){"number"===typeof e?a(function(t){return 10*t+e}):"string"===typeof e&&("CLR"===e?a(0):r&&"OK"===e&&a(function(e){var a=t.gameRounds[t.currentGameRound];return t.lastRoundStarted&&r(a,e,t.lastRoundStarted),e}))},[e,t,a,r])};var O=Object(s.withStyles)({numButton:{margin:"0.5rem",fontSize:"1.2rem"},textArea:{margin:"1rem",fontSize:"2rem"},inputArea:{margin:"1rem",fontSize:"2rem",padding:"0.5rem"}})(function(e){var t=e.classes,a=e.gameState,c=e.onChange,i=e.onSnackbarOk,o=e.message,l=Object(n.useState)(0),s=Object(u.a)(l,2),m=s[0],g=s[1],h=a.gameRounds[a.currentGameRound];return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!o,message:r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"h4",style:{color:"white"}},o),r.a.createElement(d.a,null,r.a.createElement(f.a,{onClick:function(){g(0),i&&i()},variant:"contained"},r.a.createElement(d.a,{variant:"h4"},"OK"))))}),r.a.createElement(S.a,{container:!0,spacing:32},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(d.a,{variant:"h4",align:"center"},r.a.createElement("b",null,"\u554f\u984c".concat(a.currentGameRound+1," ")),"(",a.currentGameRound+1," / ",a.gameRounds.length,")"))),r.a.createElement(S.a,{container:!0,spacing:32,style:{padding:"0.1em"}},r.a.createElement(S.a,{item:!0,xs:12,sm:6},r.a.createElement(d.a,{variant:"h4"},"".concat(h.question))),r.a.createElement(S.a,{item:!0,xs:12,sm:6},r.a.createElement(b.a,null,r.a.createElement(d.a,{variant:"h3",align:"right"},m)))),r.a.createElement(b.a,{style:{margin:"0.1em",padding:"0.1em"}},r.a.createElement(S.a,{container:!0,justify:"space-between"},[1,2,3,4,5,6,7,8,9,0,"CLR","OK"].map(function(e){return r.a.createElement(S.a,{item:!0,xs:4,key:e,style:{textAlign:"center"}},r.a.createElement(f.a,{variant:"raised",className:t.numButton,onClick:R(e,a,g,c)},e))}))))}),j=a(85),y=a.n(j),k=a(87),x=a.n(k),T=a(21),C=a.n(T),G=a(86),N=a.n(G),P=a(54),I=a.n(P),L=Object(s.createStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700}}});var B=Object(s.withStyles)(L)(function(e){var t=e.classes,a=e.componentProps,n=e.gameLog;return r.a.createElement(b.a,Object.assign({className:t.root},a),r.a.createElement(y.a,{className:t.table},r.a.createElement(N.a,null,r.a.createElement(I.a,null,r.a.createElement(C.a,null,"\u65e5\u4ed8"),r.a.createElement(C.a,null,"\u540d\u524d"),r.a.createElement(C.a,null,"\u6b63\u89e3"),r.a.createElement(C.a,null,"\u5e73\u5747\u6642\u9593"))),r.a.createElement(x.a,null,n.map(function(e,t){return r.a.createElement(I.a,{key:t},r.a.createElement(C.a,{component:"th",scope:"row"},e[0]),r.a.createElement(C.a,{component:"th",scope:"row"},e[1]),r.a.createElement(C.a,{component:"th",scope:"row"},e[2]),r.a.createElement(C.a,{component:"th",scope:"row"},e[3]))}))))});var F=Object(s.withStyles)({button:{margin:"3rem",fontSize:"2rem",width:"70%"}})(function(e){var t=e.classes,a=e.useGameStateResult,c=(e.log,Object(n.useState)([])),i=Object(u.a)(c,2),o=i[0],l=i[1],s=a.gameState,g=a.setPhase,h=a.setCurrentRound,E=a.setPlayerName,p=a.setStartTimeInString,b=a.setFinishTimeInString,v=a.setLastRoundStarted,w=a.clearResult,R=a.addResult,j=Object(n.useCallback)(function(){g("running");var e=new Date;v(e.getTime()),p(e.toLocaleString()),h(0),w(),E("unknown")},[]),y=function(e,t,a){e.answer===t?g("answered","\u6b63\u89e3\u3067\u3059"):g("answered","".concat(t,"\u306f\u4e0d\u6b63\u89e3\u3067\u3059\u3002\u6b63\u89e3\u306f").concat(e.answer)),R({elapsedTimeInMilliSec:Date.now()-a,correct:e.answer===t})},k=function(){if(g("running"),s.currentGameRound===s.gameRounds.length-1){b((new Date).toString());var e=[s.startTimeInString,s.playerName,"".concat(s.results.reduce(function(e,t){return e+(t.correct?1:0)},0)," / ").concat(s.results.length),s.results.reduce(function(e,t){return e+t.elapsedTimeInMilliSec},0)/1e3/s.gameRounds.length];l(function(t){return[].concat(Object(m.a)(t),[e])}),localStorage.setItem("log",JSON.stringify(e)),g("finished")}else h(s.currentGameRound+1)};return r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:1}),function(e){return"initial"===e.gamePhase?(g("splash"),r.a.createElement("div",null)):"splash"===e.gamePhase?(setTimeout(function(){g("ready")},1e3),r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(d.a,{align:"center",variant:"h1"},"\u7b97\u6570\u30b2\u30fc\u30e0")),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(d.a,{align:"center",variant:"h4"},"\u3055\u3093\u3059\u3046\u30b2\u30fc\u30e0\u304c\u306f\u3058\u307e\u308a\u307e\u3059\u3002")))):"ready"===e.gamePhase?r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"contained",className:t.button,color:"secondary",onClick:j,"data-testid":"start"},"START"))):"running"===e.gamePhase?r.a.createElement(S.a,{item:!0,xs:10},r.a.createElement(O,{gameState:e,onChange:y})):"answered"===e.gamePhase?r.a.createElement(S.a,{item:!0,xs:10},r.a.createElement(O,{gameState:e,message:e.message,onSnackbarOk:k})):"finished"===e.gamePhase?r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0},r.a.createElement(B,{componentProps:{width:"100%"},gameLog:o})),r.a.createElement(S.a,{item:!0,xs:10},r.a.createElement(f.a,{variant:"contained",className:t.button,color:"secondary",onClick:function(){g("initial")},"data-testid":"finished-ok"},"OK"))):r.a.createElement("div",null,"Error")}(s))}),M=a(92),z=a.n(M),A=a(93),H=a.n(A),J=a(90),K=a.n(J),q=a(91),D=a.n(q),W=a(88),X=a.n(W),Q=a(89),U=a.n(Q);var V=Object(s.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(function(e){var t=e.classes,a=e.useGameStateResult,c=Object(n.useState)(null),i=Object(u.a)(c,2),o=i[0],l=i[1],s=(a.gameState,a.setPhase),m=(a.setCurrentRound,a.setPlayerName,a.setStartTimeInString,a.setFinishTimeInString,a.setLastRoundStarted,a.clearResult,a.addResult,function(e){l(null),s("finished")});return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{position:"static"},r.a.createElement(U.a,null,r.a.createElement(K.a,{className:t.menuButton,color:"inherit",onClick:function(e){l(e.currentTarget)}},r.a.createElement(D.a,null)),r.a.createElement(d.a,{variant:"h4",color:"inherit"},"\u3055\u3093\u3059\u3046\u30b2\u30fc\u30e0"))),r.a.createElement("div",null,r.a.createElement(z.a,{id:"simple-menu",anchorEl:o,open:Boolean(o),onClose:m},r.a.createElement(H.a,{onClick:m},"\u4e2d\u6b62"))))}),Y=a(22),Z=a(94),$=function e(t,a,n,r){Object(Z.a)(this,e),this.leftHandSide=void 0,this.rightHandSide=void 0,this.operationName=void 0,this.operation=void 0,this.answer=void 0,this.question=void 0,this.leftHandSide=t,this.rightHandSide=a,this.operation=r,this.answer=this.operation(t,a),this.operationName=n,this.question="\u300c".concat(t," ").concat(this.operationName," ").concat(a,"\u300d\u306e\u7b54\u3048\u306f\uff1f")};function _(e){return Array(e).fill(0).map(function(e,t){return new $(Math.floor(99*Math.random())+1,Math.floor(99*Math.random())+1,"\uff0b",function(e,t){return e+t})})}var ee=Object(s.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(function(e){e.classes;var t=e.log,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=Object(n.useState)({gamePhase:"initial",currentGameRound:0,gameRounds:_(e),results:[],message:void 0}),a=Object(u.a)(t,2),r=a[0],c=a[1];return{gameState:r,setPhase:function(e,t){c(function(a){return Object(Y.a)({},a,{gamePhase:e,message:t})})},setCurrentRound:function(e){c(function(t){return Object(Y.a)({},t,{currentGameRound:e})})},setPlayerName:function(e){c(function(t){return Object(Y.a)({},t,{playerName:e})})},setStartTimeInString:function(e){c(function(t){return Object(Y.a)({},t,{startTimeInString:e})})},setFinishTimeInString:function(e){c(function(t){return Object(Y.a)({},t,{finishTimeInString:e})})},setLastRoundStarted:function(e){c(function(t){return Object(Y.a)({},t,{lastRoundStarted:e})})},clearResult:function(){c(function(e){return Object(Y.a)({},e,{results:[]})})},addResult:function(e){c(function(t){return Object(Y.a)({},t,{results:[].concat(Object(m.a)(t.results),[e])})})}}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null),r.a.createElement(V,{useGameStateResult:a}),r.a.createElement(F,{useGameStateResult:a,log:t}))}),te=localStorage.getItem("log"),ae=[];ae=null===te?[]:JSON.parse(te),i.a.render(r.a.createElement(ee,{log:ae}),document.getElementById("root"))},96:function(e,t,a){e.exports=a(237)}},[[96,1,2]]]);
//# sourceMappingURL=main.71de35da.chunk.js.map